{"ast":null,"code":"import React,{useEffect,useRef,useState}from'react';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const LiveDetection=()=>{const videoRef=useRef(null);const canvasRef=useRef(null);const[isDetecting,setIsDetecting]=useState(false);const[poseNet,setPoseNet]=useState(null);const[poses,setPoses]=useState([]);const[fps,setFps]=useState(0);const[isModelLoaded,setIsModelLoaded]=useState(false);// Initialize MoveNet model\nuseEffect(()=>{const initModel=async()=>{try{if(window.ml5){const model=await window.ml5.pose('MoveNet',{modelType:'lightning',enableSmoothing:true,enableTracking:true,minPoseScore:0.3,multiPoseMaxDimension:256});setPoseNet(model);setIsModelLoaded(true);console.log('MoveNet model loaded successfully');}}catch(error){console.error('Error loading MoveNet model:',error);}};initModel();},[]);// Start video stream\nconst startVideo=async()=>{try{const stream=await navigator.mediaDevices.getUserMedia({video:{width:640,height:480,facingMode:'user'}});if(videoRef.current){videoRef.current.srcObject=stream;videoRef.current.play();setIsDetecting(true);}}catch(error){console.error('Error accessing webcam:',error);alert('Error accessing webcam. Please make sure you have granted camera permissions.');}};// Stop video stream\nconst stopVideo=()=>{if(videoRef.current&&videoRef.current.srcObject){const stream=videoRef.current.srcObject;stream.getTracks().forEach(track=>track.stop());videoRef.current.srcObject=null;setIsDetecting(false);setPoses([]);}};// Draw skeleton on canvas\nconst drawSkeleton=(ctx,pose,videoWidth,videoHeight)=>{const keypoints=pose.keypoints;// Define connections between keypoints (skeleton structure)\nconst connections=[['nose','leftEye'],['nose','rightEye'],['leftEye','leftEar'],['rightEye','rightEar'],['leftShoulder','rightShoulder'],['leftShoulder','leftElbow'],['rightShoulder','rightElbow'],['leftElbow','leftWrist'],['rightElbow','rightWrist'],['leftShoulder','leftHip'],['rightShoulder','rightHip'],['leftHip','rightHip'],['leftHip','leftKnee'],['rightHip','rightKnee'],['leftKnee','leftAnkle'],['rightKnee','rightAnkle']];// Draw connections (bones)\nctx.strokeStyle='#00ff00';ctx.lineWidth=2;connections.forEach(_ref=>{let[start,end]=_ref;const startPoint=keypoints.find(kp=>kp.name===start);const endPoint=keypoints.find(kp=>kp.name===end);if(startPoint&&endPoint&&startPoint.score>0.3&&endPoint.score>0.3){ctx.beginPath();ctx.moveTo(startPoint.x,startPoint.y);ctx.lineTo(endPoint.x,endPoint.y);ctx.stroke();}});// Draw keypoints (joints)\nkeypoints.forEach(keypoint=>{if(keypoint.score>0.3){ctx.fillStyle=keypoint.score>0.7?'#ff0000':'#ffaa00';ctx.beginPath();ctx.arc(keypoint.x,keypoint.y,4,0,2*Math.PI);ctx.fill();}});};// Pose detection loop\nuseEffect(()=>{let animationId;let lastTime=0;let frameCount=0;const detectPose=async()=>{if(!poseNet||!videoRef.current||!canvasRef.current||!isDetecting){return;}const video=videoRef.current;const canvas=canvasRef.current;const ctx=canvas.getContext('2d');if(!ctx||video.readyState!==4){animationId=requestAnimationFrame(detectPose);return;}// Set canvas size to match video\ncanvas.width=video.videoWidth;canvas.height=video.videoHeight;// Clear canvas\nctx.clearRect(0,0,canvas.width,canvas.height);try{// Detect poses\nconst detectedPoses=await poseNet.predict(video);setPoses(detectedPoses);// Draw skeletons for all detected poses\ndetectedPoses.forEach(pose=>{drawSkeleton(ctx,pose,video.videoWidth,video.videoHeight);});// Calculate FPS\nconst currentTime=performance.now();frameCount++;if(currentTime-lastTime>=1000){setFps(Math.round(frameCount*1000/(currentTime-lastTime)));frameCount=0;lastTime=currentTime;}}catch(error){console.error('Error detecting pose:',error);}animationId=requestAnimationFrame(detectPose);};if(isDetecting&&isModelLoaded){detectPose();}return()=>{if(animationId){cancelAnimationFrame(animationId);}};},[poseNet,isDetecting,isModelLoaded]);return/*#__PURE__*/_jsxs(\"div\",{className:\"component-container\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Live Pose Detection\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"status-display\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Status\"}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Model: \",isModelLoaded?'Loaded':'Loading...']}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Detection: \",isDetecting?'Active':'Inactive']}),/*#__PURE__*/_jsxs(\"p\",{children:[\"FPS: \",fps]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"People Detected: \",poses.length]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"controls\",children:!isDetecting?/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-primary\",onClick:startVideo,children:\"Start Detection\"}):/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-danger\",onClick:stopVideo,children:\"Stop Detection\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"video-container\",children:[/*#__PURE__*/_jsx(\"video\",{ref:videoRef,className:\"video-element\",autoPlay:true,muted:true,playsInline:true}),/*#__PURE__*/_jsx(\"canvas\",{ref:canvasRef,className:\"canvas-overlay\"})]}),poses.length>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"status-display\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Detected Poses\"}),poses.map((pose,index)=>/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"p\",{children:[\"Person \",index+1,\": Confidence \",Math.round(pose.score*100),\"%\"]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Keypoints: \",pose.keypoints.filter(kp=>kp.score>0.3).length,\"/\",pose.keypoints.length]})]},index))]})]});};export default LiveDetection;","map":{"version":3,"names":["React","useEffect","useRef","useState","jsx","_jsx","jsxs","_jsxs","LiveDetection","videoRef","canvasRef","isDetecting","setIsDetecting","poseNet","setPoseNet","poses","setPoses","fps","setFps","isModelLoaded","setIsModelLoaded","initModel","window","ml5","model","pose","modelType","enableSmoothing","enableTracking","minPoseScore","multiPoseMaxDimension","console","log","error","startVideo","stream","navigator","mediaDevices","getUserMedia","video","width","height","facingMode","current","srcObject","play","alert","stopVideo","getTracks","forEach","track","stop","drawSkeleton","ctx","videoWidth","videoHeight","keypoints","connections","strokeStyle","lineWidth","_ref","start","end","startPoint","find","kp","name","endPoint","score","beginPath","moveTo","x","y","lineTo","stroke","keypoint","fillStyle","arc","Math","PI","fill","animationId","lastTime","frameCount","detectPose","canvas","getContext","readyState","requestAnimationFrame","clearRect","detectedPoses","predict","currentTime","performance","now","round","cancelAnimationFrame","className","children","length","onClick","ref","autoPlay","muted","playsInline","map","index","filter"],"sources":["C:/Users/tjoha/Desktop/cursor/bjj-vision/frontend/src/components/LiveDetection.tsx"],"sourcesContent":["import React, { useEffect, useRef, useState } from 'react';\r\n\r\ninterface PoseKeypoint {\r\n  x: number;\r\n  y: number;\r\n  score: number;\r\n  name: string;\r\n}\r\n\r\ninterface Pose {\r\n  keypoints: PoseKeypoint[];\r\n  keypoints3D?: PoseKeypoint[];\r\n  score: number;\r\n}\r\n\r\ndeclare global {\r\n  interface Window {\r\n    ml5: any;\r\n  }\r\n}\r\n\r\nconst LiveDetection: React.FC = () => {\r\n  const videoRef = useRef<HTMLVideoElement>(null);\r\n  const canvasRef = useRef<HTMLCanvasElement>(null);\r\n  const [isDetecting, setIsDetecting] = useState(false);\r\n  const [poseNet, setPoseNet] = useState<any>(null);\r\n  const [poses, setPoses] = useState<Pose[]>([]);\r\n  const [fps, setFps] = useState(0);\r\n  const [isModelLoaded, setIsModelLoaded] = useState(false);\r\n\r\n  // Initialize MoveNet model\r\n  useEffect(() => {\r\n    const initModel = async () => {\r\n      try {\r\n        if (window.ml5) {\r\n          const model = await window.ml5.pose('MoveNet', {\r\n            modelType: 'lightning',\r\n            enableSmoothing: true,\r\n            enableTracking: true,\r\n            minPoseScore: 0.3,\r\n            multiPoseMaxDimension: 256\r\n          });\r\n          setPoseNet(model);\r\n          setIsModelLoaded(true);\r\n          console.log('MoveNet model loaded successfully');\r\n        }\r\n      } catch (error) {\r\n        console.error('Error loading MoveNet model:', error);\r\n      }\r\n    };\r\n\r\n    initModel();\r\n  }, []);\r\n\r\n  // Start video stream\r\n  const startVideo = async () => {\r\n    try {\r\n      const stream = await navigator.mediaDevices.getUserMedia({\r\n        video: {\r\n          width: 640,\r\n          height: 480,\r\n          facingMode: 'user'\r\n        }\r\n      });\r\n      \r\n      if (videoRef.current) {\r\n        videoRef.current.srcObject = stream;\r\n        videoRef.current.play();\r\n        setIsDetecting(true);\r\n      }\r\n    } catch (error) {\r\n      console.error('Error accessing webcam:', error);\r\n      alert('Error accessing webcam. Please make sure you have granted camera permissions.');\r\n    }\r\n  };\r\n\r\n  // Stop video stream\r\n  const stopVideo = () => {\r\n    if (videoRef.current && videoRef.current.srcObject) {\r\n      const stream = videoRef.current.srcObject as MediaStream;\r\n      stream.getTracks().forEach(track => track.stop());\r\n      videoRef.current.srcObject = null;\r\n      setIsDetecting(false);\r\n      setPoses([]);\r\n    }\r\n  };\r\n\r\n  // Draw skeleton on canvas\r\n  const drawSkeleton = (ctx: CanvasRenderingContext2D, pose: Pose, videoWidth: number, videoHeight: number) => {\r\n    const keypoints = pose.keypoints;\r\n    \r\n    // Define connections between keypoints (skeleton structure)\r\n    const connections = [\r\n      ['nose', 'leftEye'], ['nose', 'rightEye'],\r\n      ['leftEye', 'leftEar'], ['rightEye', 'rightEar'],\r\n      ['leftShoulder', 'rightShoulder'],\r\n      ['leftShoulder', 'leftElbow'], ['rightShoulder', 'rightElbow'],\r\n      ['leftElbow', 'leftWrist'], ['rightElbow', 'rightWrist'],\r\n      ['leftShoulder', 'leftHip'], ['rightShoulder', 'rightHip'],\r\n      ['leftHip', 'rightHip'],\r\n      ['leftHip', 'leftKnee'], ['rightHip', 'rightKnee'],\r\n      ['leftKnee', 'leftAnkle'], ['rightKnee', 'rightAnkle']\r\n    ];\r\n\r\n    // Draw connections (bones)\r\n    ctx.strokeStyle = '#00ff00';\r\n    ctx.lineWidth = 2;\r\n    \r\n    connections.forEach(([start, end]) => {\r\n      const startPoint = keypoints.find(kp => kp.name === start);\r\n      const endPoint = keypoints.find(kp => kp.name === end);\r\n      \r\n      if (startPoint && endPoint && startPoint.score > 0.3 && endPoint.score > 0.3) {\r\n        ctx.beginPath();\r\n        ctx.moveTo(startPoint.x, startPoint.y);\r\n        ctx.lineTo(endPoint.x, endPoint.y);\r\n        ctx.stroke();\r\n      }\r\n    });\r\n\r\n    // Draw keypoints (joints)\r\n    keypoints.forEach(keypoint => {\r\n      if (keypoint.score > 0.3) {\r\n        ctx.fillStyle = keypoint.score > 0.7 ? '#ff0000' : '#ffaa00';\r\n        ctx.beginPath();\r\n        ctx.arc(keypoint.x, keypoint.y, 4, 0, 2 * Math.PI);\r\n        ctx.fill();\r\n      }\r\n    });\r\n  };\r\n\r\n  // Pose detection loop\r\n  useEffect(() => {\r\n    let animationId: number;\r\n    let lastTime = 0;\r\n    let frameCount = 0;\r\n\r\n    const detectPose = async () => {\r\n      if (!poseNet || !videoRef.current || !canvasRef.current || !isDetecting) {\r\n        return;\r\n      }\r\n\r\n      const video = videoRef.current;\r\n      const canvas = canvasRef.current;\r\n      const ctx = canvas.getContext('2d');\r\n\r\n      if (!ctx || video.readyState !== 4) {\r\n        animationId = requestAnimationFrame(detectPose);\r\n        return;\r\n      }\r\n\r\n      // Set canvas size to match video\r\n      canvas.width = video.videoWidth;\r\n      canvas.height = video.videoHeight;\r\n\r\n      // Clear canvas\r\n      ctx.clearRect(0, 0, canvas.width, canvas.height);\r\n\r\n      try {\r\n        // Detect poses\r\n        const detectedPoses = await poseNet.predict(video);\r\n        setPoses(detectedPoses);\r\n\r\n        // Draw skeletons for all detected poses\r\n        detectedPoses.forEach((pose: Pose) => {\r\n          drawSkeleton(ctx, pose, video.videoWidth, video.videoHeight);\r\n        });\r\n\r\n        // Calculate FPS\r\n        const currentTime = performance.now();\r\n        frameCount++;\r\n        if (currentTime - lastTime >= 1000) {\r\n          setFps(Math.round((frameCount * 1000) / (currentTime - lastTime)));\r\n          frameCount = 0;\r\n          lastTime = currentTime;\r\n        }\r\n\r\n      } catch (error) {\r\n        console.error('Error detecting pose:', error);\r\n      }\r\n\r\n      animationId = requestAnimationFrame(detectPose);\r\n    };\r\n\r\n    if (isDetecting && isModelLoaded) {\r\n      detectPose();\r\n    }\r\n\r\n    return () => {\r\n      if (animationId) {\r\n        cancelAnimationFrame(animationId);\r\n      }\r\n    };\r\n  }, [poseNet, isDetecting, isModelLoaded]);\r\n\r\n  return (\r\n    <div className=\"component-container\">\r\n      <h2>Live Pose Detection</h2>\r\n      \r\n      <div className=\"status-display\">\r\n        <h3>Status</h3>\r\n        <p>Model: {isModelLoaded ? 'Loaded' : 'Loading...'}</p>\r\n        <p>Detection: {isDetecting ? 'Active' : 'Inactive'}</p>\r\n        <p>FPS: {fps}</p>\r\n        <p>People Detected: {poses.length}</p>\r\n      </div>\r\n\r\n      <div className=\"controls\">\r\n        {!isDetecting ? (\r\n          <button className=\"btn btn-primary\" onClick={startVideo}>\r\n            Start Detection\r\n          </button>\r\n        ) : (\r\n          <button className=\"btn btn-danger\" onClick={stopVideo}>\r\n            Stop Detection\r\n          </button>\r\n        )}\r\n      </div>\r\n\r\n      <div className=\"video-container\">\r\n        <video\r\n          ref={videoRef}\r\n          className=\"video-element\"\r\n          autoPlay\r\n          muted\r\n          playsInline\r\n        />\r\n        <canvas\r\n          ref={canvasRef}\r\n          className=\"canvas-overlay\"\r\n        />\r\n      </div>\r\n\r\n      {poses.length > 0 && (\r\n        <div className=\"status-display\">\r\n          <h3>Detected Poses</h3>\r\n          {poses.map((pose, index) => (\r\n            <div key={index}>\r\n              <p>Person {index + 1}: Confidence {Math.round(pose.score * 100)}%</p>\r\n              <p>Keypoints: {pose.keypoints.filter(kp => kp.score > 0.3).length}/{pose.keypoints.length}</p>\r\n            </div>\r\n          ))}\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default LiveDetection; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}